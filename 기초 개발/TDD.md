# TDD(Test Driven Development)란?

```
반복 테스트를 이용한 소프트웨어 방법론으로, 작은 단위의 테스트 케이스를 작성하고 이를 통과하는 코드를 추가하는 단계를 반복하여 구현
```

짧은 개발 주기의 반복에 의졶나는 개발 프로세스이며 애자일 방법론 중 하나인 eXtream Programming(XP)의 Test-First 개념에 기반을 둔 단순한 설계를 중요시 한다.

> ### eXtream Programming(XP)

- 미래에 대한 예측을 최대한 하지않고, 지속적으로 프로토 타입을 완성하는 애자일 방법론 중 하나
- 추가 요구사항이 생기더라도, 실시간으로 반영이 가능

### 단위 테스트(Unit Test)

- 한 단위(일반적으로 Class)만을 테스트

---

## TDD의 개발 주기

![](https://velog.velcdn.com/images/blooper20/post/09832f91-57c0-4079-9714-7e4c07ce34b4/image.png)

- Red: 실패하는 테스트 코드를 먼저 작성
- Green: 테스트 코드를 성공시키기 위한 실제 코드 작성
- Yellow: 중복 코드 제거, 일반화 등의 리팩토링을 수행
  ** 중요한 것은 실패하는 테스트 코드를 작성할 때 까지 실제 코드를 작성하지 않는 것과, 실패하는 테스트를 통과할 정도의 최소 실제 코드를 작성해야 함 **
  > 이를 통해, 실제 코드에 대해 기대되는 바를 보다 명확하게 정의함으로써 불필요한 설계를 피할 수 있고, 정확한 요구 사항에 집중할 수 있음

---

## 일반 개발 방식과 TDD 개발 방식의 비교

### 일반 개발 방식

![](https://velog.velcdn.com/images/blooper20/post/35b12cfd-def7-462f-8a9b-e41417203203/image.png)

```
요구사항 분석 -> 설계 -> 개발 -> 테스트 -> 배포
```

이러한 방식은 소프트웨어 개발을 느리게 하는 잠재적 위험이 존재

- 소비자의 요구사항이 처음부터 명확하지 않을 수 있음
- 따라서 처음부터 완벽한 설계가 어려움
- 자체 버그 검출 능력 저하 또는 소스코드의 품질이 저하 될 수 있음
- 자체 테스트 비용이 증가할 수 있음

>

```
결론적으로 이런 코드들은 재사용이 어렵고 관리가 어려워져 유지보수를 어렵게 만든다.
```

작은 부분의 기능 수정에도 모든 부분을 테스트해야 하므로 전체적인 버그를 검출하기 어려워진다. 따라서 자체 버그 검출 능력이 저하된다. 그 결과 어디서 버그가 발생할 지 모르기 때문에 잘못된 코드도 고치지 않으려 하는 현상이 나타나고 이 현상은 소스코드의 품질 저하와도 직결된다. 이렇게 작은 수정에도 모든 기능을 다시 테스트해야하는 문제가 발생하여 자체 테스트 비용이 증가된다.

### TDD 개발 방식

![](https://velog.velcdn.com/images/blooper20/post/72ce41ba-a54c-49af-9377-28d6460ab565/image.png)

```
일반적인 개발 방식과의 가장 큰 차이점은 테스트 코드를 작성한 뒤에 실제 코드를 작성한다.
```

> 디자인(설계) 단계에서 프로그래밍 목적을 반드시 미리 정의해야만 하고, 또 무엇을 테스트해야 할 지 미리 정의(테스트 케이스 작성)해야만 한다.
> 테스트 코드를 작성하는 도중에 발생하는 예외사항(버그, 수정사항)들은 테스트 케이스에 추가하고 설계를 개선한다. 이후 테스트가 통과된 코드만을 코드 개발 단계에서 실제 코드로 작성한다.

```
이러한 반복적인 단계가 진행 되면서 자연스럽게 코드의 버그가 줄어들고, 소스코드는 간결해진다.
```

또한, 테스트 케이스 작성으로 인해 자연스럽게 설계가 개선됨으로 재설계 시간이 절감된다.

---

## TDD 개발 방식의 장단점

### 장점

- 보다 튼튼한 객체 지향적인 코드 생산
  코드의 재사용 보장을 명시하므로 TDD를 통한 개발 시 기능 별 철저한 모듈화가 이뤄진다. 이는 종속성과 의존성이 낮은 모듈로 조합된 개발을 가능하게 하며 필요에 따라 모듈을 추가하거나 제거해도 소프트웨어 전체 구조에 영향을 미치지 않게 된다.
- 재설계 시간의 단축
  테스트 코드를 먼저 작성하기 때문에 개발자가 지금 무엇을 해야하는 지 분명히 정의하고 개발을 시작하게 된다. 또한 테스트 시나리오를 작성하면서 다양한 예외사항에 대해 생각해볼 수 있다. 이는 개발 진행 중 소프트웨어의 전반적인 설계가 변경되는 일을 방지할 수 있다.
- 디버깅 시간의 단축
  유닛 테스팅을 하는 이점이기도 하다. 예를 들면 사용자의 데이터가 잘못 나온다면 DB의 문제인지, 비즈니스 레이어의 문제인지 UI의 문제인지 실제 모든 레이러들을 전부 디버깅 해야하지만, TDD의 경우 자동화된 유닛테스팅을 전재하므로 특정 버그를 손쉽게 찾아낼 수 있다.
- 테스트 문서의 대체 가능
  주로 SI 프로젝트 진행과정에서 어떤 요소들이 테스트 되었는 지 테스트 정의서를 만든다. 이것은 단순 통합 테스트 문서에 지나지 않는다. 하지만 TDD를 하게 될 경우 테스팅을 자동화 시킴과 동시에 보다 정확한 테스트 근거를 산출할 수 있다.
- 추가 구현의 용이함
  개발이 완료된 소프트웨어에 어떤 기능을 추가할 때 가장 우려되는 점은 해당 기능이 기존 코드에 어떤 영향을 미칠지 알지 못한다는 것이다. 하지만 TDD의 경우 자동화된 유닛 테스팅을 전제하므로 테스트 기간을 획기적으로 단축 시킬 수 있다.

---

### 단점

- 생산성의 저하
  개발 속도가 느려진다고 생각하는 사람이 많기 때문에 TDD에 대해 반신반의 한다.
  처음부터 2개의 코드를 짜야하고, 중간중간 테스트를 하면서 고쳐나가야 하기 때문이다. TDD방식의 개발 시간은 일반 개발 방식에 비해 대략 10~30% 정도 늘어난다
  > SI 프로젝트에선 소프트웨어의 품질보다 납기일 준수가 훨씬 중요하여 TDD 방식을 잘 사용하지 않는다.

---

## TDD를 하기 어려운 이류

- 이제까지 자신이 개발하던 방식을 많이 바꿔야 한다.
  몸에 체득한 것이 많을수록 바꾸기가 어렵다.
  오히려 개발을 별로 해보지 않은 사람들에겐 적용하기가 쉽다.
- TDD는 이렇게 해야된다는 이미지/틀이 있다.
  반드시 툴(단위 테스트 프레임워크)을 써서 개발해야 된다. 라고 생각한다.
  이러한 규칙에 얽매이는 것은 애자일 방식이 아니다.
  결국엔 규칙에 얽매여 똑같은 테스트를 copy&paste한다.
  도구/규칙에 집착하다 보니, TDD가 어려워지는 것이다.

---

## TDD를 잘하는 방법

** 계속해서 본인이 일하는 방식을 업그레이드 해야한다.**

> 1. 게임 개발을 하면선 stage 3을 테스트 할 때 항상 1, 2를 클리어 한 뒤 테스트를 해야한다
>    -> 테스트 비용이 증가
> 2. 어떻게 하면 테스트 비용을 낮출수 있을까를 고민한다.
> 3. 바로 stage 3로 갈 수 있도록 만든다 -> 피드백을 좀 더 저렴하게 받을 수 있다.

- Back Door 접근 법: 테스트 할 때 파라미터를 적용하여 본인이 원하는 시스템의 시작점으로 가게하는 것
  즉 중복적으로 하는 노력들을 자동화하도록 업그레이드하면 발전할 수 있다.

---

# 느낀 점

직접 프로젝트를 할 때 사소한 이슈나 UI 관련하여 확인 하고싶을 때 마다 빌드되는 시간이 오래 걸려 이에 대해 불편함을 느낀 기억이 많은데 이런 TDD 개발 방식을 이용하면 쉽게 테스트를 할 수 있다는 것을 처음 알게 되었다. 하지만 나는 애자일 방식의 개발을 지향하고 있어 TDD 개발 방식을 어느정도 따와 내가 개발하는 방식에 적용하는 방법을 찾아봐야겠다.

---

# [참고한 블로그 링크](https://wooaoe.tistory.com/33)
